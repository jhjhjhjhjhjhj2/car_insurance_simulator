<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta
  name="viewport"
  content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover, interactive-widget=resizes-content"
/>
<title>ìë™ì°¨ë³´í—˜ í• ì¸ìœ¨ ê³„ì‚°ê¸°</title>
<style>
  :root{
    --primary:#3b82f6;
    --bg:#f3f4f6;
    --text:#111827;
    --muted:#6b7280;
    --line:#e5e7eb;
    --card:#ffffff;
    --best:#eff6ff;
    --accentMileage:#7c3aed;

    --warnBg:#fff1f2;
    --warnBorder:#fecdd3;
    --warnTitle:#be123c;
  }

  /* ===== WebView(iOS/Kakao) ì•ˆì •í™” ê¸°ë³¸ê°’ ===== */
  *{ box-sizing:border-box; }
  html, body{
    width:100%;
    max-width:100%;
    overflow-x:clip;
    overflow-x:hidden;
    -webkit-text-size-adjust:100%;
    text-size-adjust:100%;
  }

  /* flex/grid ìì‹ì´ ë‚´ìš© ë•Œë¬¸ì— í­ì„ ë°€ì–´ë‚´ì§€ ì•Šê²Œ */
  .container, .section, .card, .card-top, .rate-box, .grid-2,
  .co-name, .badges, .desc, .consider-box, .consider-item, .mini-note{
    min-width:0;
  }

  /* ê¸´ ë¬¸êµ¬ê°€ ì¤„ë°”ê¿ˆ ì—†ì´ ê°€ë¡œë¡œ ë»—ëŠ” ê²ƒ ë°©ì§€ */
  .hint, .desc, .consider-item, .mini-note{
    overflow-wrap:anywhere;
    word-break:break-word;
  }

  body{
    font-family:'Apple SD Gothic Neo','Malgun Gothic',sans-serif;
    background:var(--bg);
    color:var(--text);
    padding:20px;
    display:flex;
    justify-content:center;
    margin:0;
  }

  .container{
    background:#fff;
    width:100%;
    max-width:760px;
    padding:24px;
    border-radius:16px;
    box-shadow:0 4px 10px rgba(0,0,0,0.08);
  }

  h2{
    text-align:center;
    color:var(--primary);
    margin:0 0 18px 0;
    padding-bottom:14px;
    border-bottom:2px solid var(--line);
    font-size:1.55rem;
  }

  .section{
    margin-bottom:16px;
    background:#f9fafb;
    padding:14px;
    border-radius:12px;
    border:1px solid var(--line);
  }

  .label{
    font-size:0.95rem;
    font-weight:900;
    margin-bottom:10px;
    display:block;
    color:#374151;
  }

  .hint{
    font-size:0.82rem;
    color:var(--muted);
    margin-top:8px;
    line-height:1.45;
  }

  .sub-text{
    font-size:0.8rem;
    color:#ef4444;
    margin-top:6px;
    display:none;
  }

  select, input{
    width:100%;
    padding:12px;
    border:1px solid #d1d5db;
    border-radius:10px;
    font-size:1rem;
    background:#fff;
  }

  .grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:10px; }

  button.primary{
    width:100%;
    padding:16px;
    background:var(--primary);
    color:#fff;
    border:none;
    border-radius:12px;
    font-size:1.1rem;
    font-weight:900;
    cursor:pointer;
    transition:0.2s;
    margin-top:6px;
  }
  button.primary:hover{ background:#2563eb; transform:translateY(-1px); }

  /* pills */
  .pill-row{ display:flex; flex-wrap:wrap; gap:8px; }
  .pill{
    display:inline-flex;
    align-items:center;
    gap:8px;
    border:1px solid #d1d5db;
    background:#fff;
    color:#111827;
    padding:10px 12px;
    border-radius:999px;
    cursor:pointer;
    user-select:none;
    font-size:0.92rem;
    font-weight:800;
    min-width:0;
  }
  .pill input{ display:none; }
  .pill.on{
    border-color:#93c5fd;
    background:#eff6ff;
    color:#1d4ed8;
  }
  .pill .small{ font-size:0.78rem; font-weight:800; color:var(--muted); }

  /* results */
  #result{
    margin-top:18px;
    display:none;
    border-top:2px solid var(--line);
    padding-top:18px;
    width:100%;
    max-width:100%;
    overflow-x:hidden;
  }

  .card{
    background:var(--card);
    border:1px solid var(--line);
    border-radius:14px;
    padding:14px;
    margin-bottom:12px;
    box-shadow:0 2px 6px rgba(0,0,0,0.05);
    width:100%;
    max-width:100%;
    overflow-x:hidden;
  }
  .card.best{
    border:2px solid var(--primary);
    background:var(--best);
  }

  /* ===== í•µì‹¬: card-topì„ 2ì—´ gridë¡œ ê°•ì œ(ì¸ì•± flex í­ íŠ ë°©ì§€) ===== */
  .card-top{
    display:grid;
    grid-template-columns: 1fr minmax(0, 340px);
    gap:12px;
    align-items:start;
    min-width:0;
  }
  .card-top > div:first-child{ min-width:0; }

  .co-name{
    font-weight:950;
    font-size:1.08rem;
    display:flex;
    align-items:center;
    gap:8px;

    min-width:0;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
  }

  .badges{ display:flex; gap:6px; align-items:center; flex-wrap:wrap; min-width:0; }
  .badge{
    font-size:0.78rem;
    font-weight:950;
    padding:4px 8px;
    border-radius:999px;
    border:1px solid #d1d5db;
    background:#fff;
    color:#374151;
    white-space:nowrap;
    flex:0 0 auto;
  }
  .badge.best{
    border-color:#93c5fd;
    background:#dbeafe;
    color:#1d4ed8;
  }

  .rate-box{
    width:100%;
    min-width:0;
    max-width:100%;
    display:grid;
    grid-template-columns: 1fr 1fr;
    gap:10px;
    align-items:stretch;
  }

  .rate{
    border:1px solid #d1d5db;
    background:#fff;
    border-radius:12px;
    padding:10px 10px;
    display:flex;
    flex-direction:column;
    gap:4px;

    min-width:0;
    max-width:100%;
    text-align:right;
  }
  .rate .k{
    font-size:0.78rem;
    color:var(--muted);
    font-weight:900;
    min-width:0;
    overflow:hidden;
    text-overflow:ellipsis;
    white-space:nowrap;
  }
  .rate .v{ font-size:1.24rem; font-weight:950; color:#111827; }
  .rate.instant .v{ color:#1d4ed8; }
  .rate.mileage .v{ color:var(--accentMileage); }

  .divider{ height:1px; background:var(--line); margin:12px 0; }

  .desc{
    font-size:0.84rem;
    color:var(--muted);
    margin-top:6px;
    display:block;
    line-height:1.45;
  }
  .desc strong{ color:#374151; }

  .consider-box{
    margin-top:10px;
    padding:10px;
    border:1px dashed #cbd5e1;
    background:#f8fafc;
    border-radius:12px;
  }

  .consider-box.warn{
    border:1px solid var(--warnBorder);
    background:var(--warnBg);
  }
  .consider-box.warn .consider-title{ color:var(--warnTitle); }

  .consider-title{
    font-weight:950;
    font-size:0.9rem;
    color:#0f172a;
    margin-bottom:6px;
  }
  .consider-item{
    font-size:0.84rem;
    color:#334155;
    line-height:1.45;
    margin:6px 0;
  }
  .consider-item b{ color:#0f172a; }

  .mini-note{
    font-size:0.78rem;
    color:var(--muted);
    margin-top:6px;
    line-height:1.4;
  }

  /* ===== iOSì—ì„œ input í™•ëŒ€/ë ˆì´ì•„ì›ƒ íŠ ë°©ì§€ ===== */
  select, input, button{ font-size:16px; }

  /* ===== Mobile responsive fixes (í•µì‹¬) ===== */
  @media (max-width: 520px){
    body{
      padding:12px;
      display:block;
    }

    .container{
      width:100%;
      padding:16px;
      border-radius:14px;
    }

    h2{
      font-size:1.25rem;
      padding-bottom:12px;
    }

    .grid-2{
      grid-template-columns:1fr;
      gap:10px;
    }

    .pill-row{ gap:8px; }
    .pill{ width:100%; justify-content:space-between; }

    .card-top{
      grid-template-columns: 1fr;
      gap:10px;
    }

    .rate-box{
      grid-template-columns: 1fr;
      gap:10px;
    }

    .rate{
      width:100%;
      text-align:left;
    }

    .rate .v{ font-size:1.15rem; }
  }

  @media (min-width: 521px) and (max-width: 720px){
    body{ display:block; }
    .card-top{
      grid-template-columns: 1fr;
      align-items:stretch;
    }
    .rate-box{
      grid-template-columns: 1fr 1fr;
      width:100%;
      gap:10px;
    }
    .rate{ width:100%; text-align:left; }
  }
</style>
</head>
<body>

<div class="container">
  <h2>ğŸš—ìë™ì°¨ë³´í—˜ íŠ¹ì•½ë³„ ë³´í—˜ë£Œ í• ì¸ìœ¨ ê³„ì‚°ê¸°</h2>

  <div class="section">
    <span class="label">1. ì—°ê°„ ì£¼í–‰ê±°ë¦¬ (ë§ˆì¼ë¦¬ì§€: í›„ì •ì‚°)</span>
    <select id="km">
      <option value="1000">1,000km ì´í•˜</option>
      <option value="2000">2,000km ì´í•˜</option>
      <option value="3000">3,000km ì´í•˜</option>
      <option value="4000">4,000km ì´í•˜</option>
      <option value="5000">5,000km ì´í•˜</option>
      <option value="6000">6,000km ì´í•˜</option>
      <option value="7000">7,000km ì´í•˜</option>
      <option value="8000">8,000km ì´í•˜</option>
      <option value="9000">9,000km ì´í•˜</option>
      <option value="10000" selected>10,000km ì´í•˜</option>
      <option value="11000">11,000km ì´í•˜</option>
      <option value="12000">12,000km ì´í•˜</option>
      <option value="13000">13,000km ì´í•˜</option>
      <option value="14000">14,000km ì´í•˜</option>
      <option value="15000">15,000km ì´í•˜</option>
      <option value="over">15,000km ì´ˆê³¼</option>
    </select>
    <div class="hint">
      ë§ˆì¼ë¦¬ì§€ëŠ” ë³´í†µ ì„ í• ì¸(ì¦‰ì‹œí• ì¸) ì ìš© í›„ ë³´í—˜ë£Œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‚˜ì¤‘ì— ì •ì‚°(í™˜ê¸‰)ë˜ëŠ” êµ¬ì¡°ë¼,
      ì¦‰ì‹œí• ì¸ê³¼ í•©ì‚°í•˜ì§€ ì•Šê³  ë³„ë„ í‘œì‹œí•©ë‹ˆë‹¤.
    </div>
  </div>

  <div class="section">
    <span class="label">2. ì°¨ëŸ‰ ì •ë³´</span>
    <div class="grid-2">
      <div>
        <select id="carAge"></select>
        <div class="hint">ì°¨ë ¹ 0ë…„ì€ 2026ë…„ì‹(ì‹ ì°¨) ê¸°ì¤€ì…ë‹ˆë‹¤.</div>
      </div>
      <div>
        <select id="bbox">
          <option value="N">ë¸”ë™ë°•ìŠ¤ ë¯¸ì¥ì°©</option>
          <option value="Y">ë¸”ë™ë°•ìŠ¤ ì¥ì°©</option>
        </select>
        <div class="hint">ë¸”ë™ë°•ìŠ¤ëŠ” ì¦‰ì‹œí• ì¸(ì„ í• ì¸) í•­ëª©ì…ë‹ˆë‹¤.</div>
      </div>
    </div>
  </div>

  <div class="section">
    <span class="label">3. ìë…€ ì •ë³´ (ë§Œ ë‚˜ì´)</span>
    <div class="grid-2">
      <div>
        <select id="childCount" onchange="checkChildMsg()">
          <option value="0">ìë…€ ì—†ìŒ</option>
          <option value="1">1ëª…</option>
          <option value="2">2ëª… ì´ìƒ</option>
        </select>
      </div>
      <div>
        <select id="childAge">
          <option value="none">ì„ íƒ ì•ˆ í•¨</option>
          <option value="fetus">íƒœì•„</option>
          <option value="0">ë§Œ 0ì„¸</option>
          <option value="1">ë§Œ 1ì„¸</option>
          <option value="2">ë§Œ 2ì„¸</option>
          <option value="3">ë§Œ 3ì„¸</option>
          <option value="4">ë§Œ 4ì„¸</option>
          <option value="5">ë§Œ 5ì„¸</option>
          <option value="6">ë§Œ 6ì„¸</option>
          <option value="7">ë§Œ 7ì„¸</option>
          <option value="8">ë§Œ 8ì„¸</option>
          <option value="9">ë§Œ 9ì„¸</option>
          <option value="10">ë§Œ 10ì„¸</option>
          <option value="11">ë§Œ 11ì„¸</option>
          <option value="12">ë§Œ 12ì„¸</option>
          <option value="13">ë§Œ 13ì„¸</option>
          <option value="14">ë§Œ 14ì„¸</option>
          <option value="15">ë§Œ 15ì„¸</option>
          <option value="16">ë§Œ 16ì„¸</option>
          <option value="17">ë§Œ 17ì„¸</option>
          <option value="18">ë§Œ 18ì„¸</option>
        </select>
      </div>
    </div>
    <div id="childMsg" class="sub-text">â€» ìë…€ê°€ 2ëª… ì´ìƒì´ë©´ <b>ë§‰ë‚´ ë‚˜ì´</b> ê¸°ì¤€ìœ¼ë¡œ ì…ë ¥í•˜ì„¸ìš”.</div>
  </div>

  <div class="section">
    <span class="label">4. ì•ˆì „ìš´ì „ ì ìˆ˜ (UBI: ì¦‰ì‹œí• ì¸)</span>
    <div class="grid-2">
      <select id="ubiApp">
        <option value="none">ì‚¬ìš© ì•ˆ í•¨</option>
        <option value="tmap">í‹°ë§µ (T-map)</option>
        <option value="naver">ë„¤ì´ë²„ì§€ë„</option>
      </select>
      <input type="number" id="ubiScore" placeholder="ì ìˆ˜ (ì˜ˆ: 65)" />
    </div>
    <div class="hint">UBIëŠ” ë³´í—˜ì‚¬ì™€ ìƒí’ˆì— ë”°ë¼ ì ìš©ì¡°ê±´ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
  </div>

  <div class="section">
    <span class="label">5. ì¦‰ì‹œí• ì¸ íŠ¹ì•½ (ì„ íƒí˜•)</span>

    <div class="pill-row">
      <label class="pill" id="pill_walk">
        <input type="checkbox" id="rider_walk" />
        <span>ê±·ê¸°ì ìˆ˜ í• ì¸íŠ¹ì•½</span>
        <span class="small">(ì„ íƒ)</span>
      </label>

      <label class="pill" id="pill_transit">
        <input type="checkbox" id="rider_transit" />
        <span>ëŒ€ì¤‘êµí†µì´ìš© í• ì¸íŠ¹ì•½</span>
        <span class="small">(ì„ íƒ)</span>
      </label>

      <label class="pill" id="pill_seniorEdu">
        <input type="checkbox" id="rider_seniorEdu" />
        <span>ê³ ë ¹ìš´ì „ì êµí†µì•ˆì „êµìœ¡í• ì¸</span>
        <span class="small">(ì„ íƒ)</span>
      </label>
    </div>

    <div class="hint">
      â€¢ ê±·ê¸°ì ìˆ˜ ì˜ˆì‹œ: ë³´í—˜ì‚¬ ìì²´ ì•±, ìºì‹œì›Œí¬, í† ìŠ¤ ë“± ì•± í™œìš©, ì§ì „ ê¸°ì¤€ì¼ê°„ ì¼ 5,000ë³´ ì´ìƒ ê±¸ì€ ë‚ ì´ ê¸°ì¤€ì¼ìˆ˜ ì´ìƒì¸ ê²½ìš° (ë³´í—˜ì‚¬ë³„ ê¸°ì¤€ ìƒì´)<br/>
      â€¢ ëŒ€ì¤‘êµí†µ ì˜ˆì‹œ: ê¸°ì¤€ ë‚´ ëŒ€ì¤‘êµí†µ ì´ìš©íšŸìˆ˜ ë˜ëŠ” ì´ìš©ê¸ˆì•¡ì´ ì¼ì • ê±´ìˆ˜ ë˜ëŠ” ê¸ˆì•¡ ì´ìƒì¸ ê²½ìš° (ë³´í—˜ì‚¬ë³„ ê¸°ì¤€ ìƒì´)<br/>
      â€¢ ê³ ë ¹ìš´ì „ì êµìœ¡ ì˜ˆì‹œ: ë§Œ 65ì„¸ ì´ìƒ ë„ë¡œêµí†µê³µë‹¨ êµí†µì•ˆì „êµìœ¡ ì´ìˆ˜ ì‹œ í• ì¸
    </div>
  </div>

  <button class="primary" onclick="calculate()">í• ì¸ìœ¨ ê³„ì‚°í•˜ê¸°</button>

  <div id="result"></div>
</div>

<script>
  const companies = ['í˜„ëŒ€','KB','ì‚¼ì„±','DB','ë©”ë¦¬ì¸ ','í•œí™”'];

  const BASE_NEW_YEAR = 2026;
  function buildCarAgeOptions(){
    const sel = document.getElementById('carAge');
    sel.innerHTML = '';

    for (let age = 0; age <= 14; age++){
      const y = BASE_NEW_YEAR - age;
      const opt = document.createElement('option');
      opt.value = String(age);
      opt.textContent = `${age}ë…„ (${y}ë…„ì‹)`;
      sel.appendChild(opt);
    }

    const opt15 = document.createElement('option');
    opt15.value = '15';
    opt15.textContent = `15ë…„ ì´ìƒ (${BASE_NEW_YEAR - 15}ë…„ ì´ì „)`;
    sel.appendChild(opt15);

    sel.value = '0';
  }

  const RIDER_RULE_TEXT = {
    walk: {
      'í˜„ëŒ€': 'ì„¸ë¶€ ì¡°ê±´ ëª…ì‹œ X',
      'KB': '[KB Walk][ìºì‹œì›Œí¬][í† ìŠ¤] ì•± ì´ìš©, ê¸°ëª…í”¼ë³´í—˜ìê±¸ìŒìˆ˜ ì§ì „ 30ì¼ê°„ â€˜í•˜ë£¨ 5ì²œë³´ ë‹¬ì„±ì¼â€™ì´ â€˜17ì¼ ì´ìƒâ€™',
      'ì‚¼ì„±': 'ì„¸ë¶€ ì¡°ê±´ ëª…ì‹œ X',
      'DB': 'ì§ì „ 90ì¼ ë™ì•ˆ 1ì¼ 5,000ë³´ ì´ìƒ ê±¸ì€ ë‚ ì´ 45ì¼ ì´ìƒ',
      'ë©”ë¦¬ì¸ ': 'í•´ë‹¹ íŠ¹ì•½ X',
      'í•œí™”': 'í•´ë‹¹ íŠ¹ì•½ X'
    },
    transit: {
      'í˜„ëŒ€': '3ê°œì›” ë‚´ ì‹¤ë¬¼ì¹´ë“œ or ëª¨ë°”ì¼ì¹´ë“œ or í†µê·¼ë²„ìŠ¤ 50íšŒ ì´ìƒ ì´ìš©',
      'KB': 'ì§ì „ 3ê°œì›”ê°„ ëŒ€ì¤‘êµí†µì´ìš©ê¸ˆì•¡ 7ë§Œì› ì´ìƒ(ê¸°ëª… 1ì¸ ê¸°ì¤€)',
      'ì‚¼ì„±': 'ì§ì „ 2ê°œì›” ê°„ ì§€í•˜ì² , ë²„ìŠ¤, íƒì‹œ, ë”°ë¦‰ì´ 25ì¼ ì´ìƒ ì´ìš© â€»ì£¼ì˜: ê°€ì… ì‹œ ë³´í—˜ë£Œ 8% + ë§ˆì¼ë¦¬ì§€ ì •ì‚° ì‹œ í™˜ê¸‰ë³´í—˜ë£Œ ìˆëŠ” ê²½ìš° ì¶”ê°€ 2% í˜•íƒœ ë“±(ìƒí’ˆë³„ ìƒì´)',
      'DB': 'ì²­êµ¬ì›” ê¸°ì¤€ ì§ì „ 2ê°œì›” ë™ì•ˆ ëŒ€ì¤‘êµí†µ ì´ìš©íšŸìˆ˜ê°€ 50ê±´ ì´ìƒ',
      'ë©”ë¦¬ì¸ ': 'í•´ë‹¹ íŠ¹ì•½ ì—†ìŒ',
      'í•œí™”': 'í•´ë‹¹ íŠ¹ì•½ ì—†ìŒ'
    },
    seniorEdu: {
      'í˜„ëŒ€': 'ë§Œ 65ì„¸ ì´ìƒ ë„ë¡œêµí†µê³µë‹¨ êµí†µì•ˆì „êµìœ¡ ì´ìˆ˜ ì‹œ í• ì¸',
      'KB': 'ë§Œ 65ì„¸ ì´ìƒ ë„ë¡œêµí†µê³µë‹¨ êµí†µì•ˆì „êµìœ¡ ì´ìˆ˜ ì‹œ í• ì¸',
      'ì‚¼ì„±': 'ë§Œ 65ì„¸ ì´ìƒ ë„ë¡œêµí†µê³µë‹¨ êµí†µì•ˆì „êµìœ¡ ì´ìˆ˜ ì‹œ í• ì¸',
      'DB': 'ë§Œ 65ì„¸ ì´ìƒ ë„ë¡œêµí†µê³µë‹¨ êµí†µì•ˆì „êµìœ¡ ì´ìˆ˜ ì‹œ í• ì¸',
      'ë©”ë¦¬ì¸ ': 'ë§Œ 65ì„¸ ì´ìƒ ë„ë¡œêµí†µê³µë‹¨ êµí†µì•ˆì „êµìœ¡ ì´ìˆ˜ ì‹œ í• ì¸',
      'í•œí™”': 'ë§Œ 65ì„¸ ì´ìƒ ë„ë¡œêµí†µê³µë‹¨ êµí†µì•ˆì „êµìœ¡ ì´ìˆ˜ ì‹œ í• ì¸'
    }
  };

  function getRiderRuleText(companyName, key){
    const v = RIDER_RULE_TEXT?.[key]?.[companyName];
    return (v && String(v).trim()) ? String(v) : 'ëª…ì‹œ X';
  }

  const KM_DATA = {
    'í˜„ëŒ€': {1000:45.00, 2000:36.00, 3000:36.00, 4000:29.00, 5000:29.00, 6000:22.00, 7000:22.00, 8000:22.00, 9000:18.00, 10000:18.00, 11000:8.00, 12000:8.00, 13000:5.00, 14000:5.00, 15000:5.00, 'over':2.00},
    'KB':   {1000:35.30, 2000:35.30, 3000:30.30, 4000:30.30, 5000:26.50, 6000:22.60, 7000:22.60, 8000:22.60, 9000:17.30, 10000:17.30, 11000:7.50, 12000:7.50, 13000:5.40, 14000:5.40, 15000:5.40, 'over':0.00},
    'ì‚¼ì„±': {1000:40.00, 2000:34.00, 3000:28.00, 4000:25.00, 5000:23.00, 6000:22.00, 7000:20.00, 8000:20.00, 9000:16.00, 10000:16.00, 11000:5.00, 12000:5.00, 13000:2.00, 14000:2.00, 15000:2.00, 'over':0.00},
    'DB':   {1000:42.00, 2000:35.00, 3000:27.00, 4000:25.00, 5000:24.00, 6000:22.00, 7000:21.00, 8000:20.00, 9000:18.00, 10000:17.00, 11000:11.00, 12000:11.00, 13000:8.00, 14000:8.00, 15000:8.00, 'over':0.00},
    'ë©”ë¦¬ì¸ ':{1000:47.00, 2000:47.00, 3000:47.00, 4000:31.00, 5000:31.00, 6000:31.00, 7000:31.00, 8000:31.00, 9000:14.00, 10000:14.00, 11000:14.00, 12000:14.00, 13000:2.00, 14000:2.00, 15000:2.00, 'over':2.00},
    'í•œí™”': {1000:38.90, 2000:36.20, 3000:33.50, 4000:30.80, 5000:28.10, 6000:25.50, 7000:22.80, 8000:20.10, 9000:17.40, 10000:14.70, 11000:12.10, 12000:9.40, 13000:6.70, 14000:4.00, 15000:1.30, 'over':0.00}
  };

  const BBOX_DATA = {
    'í˜„ëŒ€':  [2.20,2.20,2.20,2.20,2.20,2.20,2.20,2.20,2.20,2.20,2.20,2.20,2.20,0.00,0.00,0.00],
    'KB':    [4.30,4.30,4.30,2.60,2.60,2.60,2.60,2.60,2.60,2.60,2.60,2.60,0.00,0.00,0.00,0.00],
    'ì‚¼ì„±':  [1.70,1.70,1.70,1.70,1.70,1.70,1.70,1.70,1.70,1.70,1.70,1.70,1.70,1.70,1.70,1.70],
    'DB':    [2.50,2.50,2.50,1.40,1.40,1.40,1.40,1.40,1.40,1.40,0.00,0.00,0.00,0.00,0.00,0.00],
    'ë©”ë¦¬ì¸ ':[10.00,5.00,5.00,5.00,5.00,5.00,5.00,5.00,5.00,5.00,5.00,5.00,5.00,5.00,5.00,5.00],
    'í•œí™”':  [6.00,5.00,5.00,5.00,5.00,5.00,5.00,5.00,5.00,4.00,4.00,4.00,4.00,4.00,4.00,4.00]
  };
  function getBBoxRate(comp, carAge){
    const yIdx = (carAge >= 15) ? 15 : carAge;
    const row = BBOX_DATA[comp] || [];
    return (row[yIdx] !== undefined) ? Number(row[yIdx]) : 0.00;
  }

  const CHILD_1 = {
    'í˜„ëŒ€':  {'fetus':14.00, 0:14.00, 1:10.00,2:10.00,3:10.00,4:10.00,5:10.00,6:10.00,7:6.00,8:6.00,9:6.00,10:2.00,11:2.00,12:2.00,13:0.00,14:0.00,15:0.00,16:0.00,17:0.00,18:0.00},
    'KB':    {'fetus':13.70, 0:13.70, 1:7.70,2:7.70,3:7.70,4:7.70,5:7.70,6:7.70,7:3.70,8:3.70,9:3.70,10:1.70,11:1.70,12:1.70,13:1.70,14:0.00,15:0.00,16:0.00,17:0.00,18:0.00},
    'ì‚¼ì„±':  {'fetus':15.50, 0:2.80,  1:1.00,2:1.00,3:1.00,4:1.00,5:1.00,6:1.40,7:1.40,8:1.40,9:1.40,10:1.40,11:1.40,12:1.40,13:1.40,14:1.40,15:1.40,16:1.40,17:1.40,18:1.40},
    'DB':    {'fetus':16.10, 0:8.70,  1:4.30,2:4.30,3:4.30,4:4.30,5:4.30,6:3.60,7:1.70,8:1.70,9:1.70,10:1.70,11:1.70,12:0.00,13:0.00,14:0.00,15:0.00,16:0.00,17:0.00,18:0.00},
    'ë©”ë¦¬ì¸ ':{'fetus':7.00,  0:7.00,  1:7.00,2:7.00,3:7.00,4:7.00,5:7.00,6:7.00,7:7.00,8:0.00,9:0.00,10:0.00,11:0.00,12:0.00,13:0.00,14:0.00,15:0.00,16:0.00,17:0.00,18:0.00},
    'í•œí™”':  {'fetus':20.10, 0:16.10, 1:7.00,2:7.00,3:7.00,4:7.00,5:8.00,6:8.00,7:8.00,8:8.00,9:8.00,10:8.00,11:0.00,12:0.00,13:0.00,14:0.00,15:0.00,16:0.00,17:0.00,18:0.00}
  };

  const CHILD_MULTI = {
    'í˜„ëŒ€':  {'fetus':16.00, 0:15.00, 1:11.00,2:11.00,3:11.00,4:11.00,5:11.00,6:11.00,7:8.00,8:8.00,9:8.00,10:4.00,11:4.00,12:4.00,13:0.00,14:0.00,15:0.00,16:0.00,17:0.00,18:0.00},
    'KB':    {'fetus':15.30, 0:15.30, 1:9.40, 2:9.40,3:9.40,4:9.40,5:9.40,6:9.40,7:5.40,8:5.40,9:5.40,10:3.50,11:3.50,12:3.50,13:3.50,14:0.00,15:0.00,16:0.00,17:0.00,18:0.00},
    'ì‚¼ì„±':  {'fetus':17.10, 0:4.40,  1:2.60, 2:2.60,3:2.60,4:2.60,5:2.60,6:3.00,7:3.00,8:3.00,9:3.00,10:3.00,11:3.00,12:5.10,13:5.10,14:5.10,15:5.10,16:5.10,17:5.10,18:5.10},
    'DB':    {'fetus':18.10, 0:10.70, 1:6.30, 2:6.30,3:6.30,4:6.30,5:6.30,6:5.60,7:3.70,8:3.70,9:3.70,10:3.70,11:3.70,12:0.00,13:0.00,14:0.00,15:0.00,16:0.00,17:0.00,18:0.00},
    'ë©”ë¦¬ì¸ ':{'fetus':7.00,  0:7.00,  1:7.00, 2:7.00,3:7.00,4:7.00,5:7.00,6:7.00,7:7.00,8:0.00,9:0.00,10:0.00,11:0.00,12:0.00,13:0.00,14:0.00,15:0.00,16:0.00,17:0.00,18:0.00},
    'í•œí™”':  {'fetus':24.40, 0:20.60, 1:12.00,2:12.00,3:12.00,4:12.00,5:8.00, 6:8.00, 7:8.00, 8:8.00, 9:8.00,10:8.00,11:0.00,12:0.00,13:0.00,14:0.00,15:0.00,16:0.00,17:0.00,18:0.00}
  };

  function getChildRate(comp, childCount, childAgeKey){
    const table = (childCount === '1') ? CHILD_1 : CHILD_MULTI;
    const compRow = table[comp] || {};
    if (!Object.prototype.hasOwnProperty.call(compRow, childAgeKey)) return 0.00;
    return Number(compRow[childAgeKey]);
  }

  const UBI_USED = {
    'í˜„ëŒ€': { tmap:[{min:96,rate:11.00},{min:95,rate:11.00},{min:91,rate:11.00},{min:90,rate:11.00},{min:86,rate:8.00},{min:85,rate:8.00},{min:81,rate:8.00},{min:80,rate:8.00},{min:71,rate:4.30},{min:70,rate:4.30},{min:61,rate:0.00}],
              naver:[{min:96,rate:10.20},{min:95,rate:10.20},{min:91,rate:10.20},{min:90,rate:10.20},{min:86,rate:7.20},{min:85,rate:7.20},{min:81,rate:7.20},{min:80,rate:7.20},{min:71,rate:3.50},{min:70,rate:3.50},{min:61,rate:0.00}] },
    'KB':   { tmap:[{min:96,rate:19.50},{min:95,rate:19.50},{min:91,rate:13.70},{min:90,rate:13.70},{min:86,rate:7.30},{min:85,rate:7.30},{min:81,rate:7.30},{min:80,rate:7.30},{min:71,rate:0.60},{min:70,rate:0.60},{min:61,rate:0.00}],
              naver:[{min:96,rate:19.60},{min:95,rate:19.60},{min:91,rate:19.60},{min:90,rate:19.60},{min:86,rate:18.60},{min:85,rate:18.60},{min:81,rate:18.60},{min:80,rate:18.60},{min:71,rate:13.10},{min:70,rate:13.10},{min:61,rate:0.00}] },
    'ì‚¼ì„±': { tmap:[{min:96,rate:16.90},{min:95,rate:16.90},{min:91,rate:10.70},{min:90,rate:4.60},{min:86,rate:4.60},{min:85,rate:4.60},{min:81,rate:4.60},{min:80,rate:0.00},{min:71,rate:0.00},{min:70,rate:0.00},{min:61,rate:0.00}],
              naver:[{min:96,rate:19.50},{min:95,rate:19.50},{min:91,rate:11.50},{min:90,rate:4.70},{min:86,rate:4.70},{min:85,rate:4.70},{min:81,rate:4.70},{min:80,rate:0.00},{min:71,rate:0.00},{min:70,rate:0.00},{min:61,rate:0.00}] },
    'DB':   { tmap:[{min:96,rate:19.30},{min:95,rate:19.30},{min:91,rate:12.60},{min:90,rate:12.60},{min:86,rate:2.00},{min:85,rate:2.00},{min:81,rate:2.00},{min:80,rate:2.00},{min:71,rate:2.00},{min:70,rate:0.00},{min:61,rate:0.00}],
              naver:[{min:96,rate:19.30},{min:95,rate:19.30},{min:91,rate:12.60},{min:90,rate:12.60},{min:86,rate:2.00},{min:85,rate:2.00},{min:81,rate:2.00},{min:80,rate:2.00},{min:71,rate:2.00},{min:70,rate:0.00},{min:61,rate:0.00}] },
    'ë©”ë¦¬ì¸ ':{ tmap:[{min:96,rate:15.00},{min:95,rate:6.00},{min:91,rate:6.00},{min:90,rate:6.00},{min:86,rate:6.00},{min:85,rate:0.00},{min:81,rate:0.00},{min:80,rate:0.00},{min:71,rate:0.00},{min:70,rate:0.00},{min:61,rate:0.00}],
               naver:[{min:96,rate:15.00},{min:95,rate:6.00},{min:91,rate:6.00},{min:90,rate:6.00},{min:86,rate:6.00},{min:85,rate:0.00},{min:81,rate:0.00},{min:80,rate:0.00},{min:71,rate:0.00},{min:70,rate:0.00},{min:61,rate:0.00}] },
    'í•œí™”': { tmap:[{min:96,rate:18.10},{min:95,rate:18.10},{min:91,rate:18.10},{min:90,rate:18.10},{min:86,rate:9.50},{min:85,rate:9.50},{min:81,rate:9.50},{min:80,rate:9.50},{min:71,rate:0.00},{min:70,rate:0.00},{min:61,rate:0.00}],
              naver:[{min:96,rate:0.00},{min:95,rate:0.00},{min:91,rate:0.00},{min:90,rate:0.00},{min:86,rate:0.00},{min:85,rate:0.00},{min:81,rate:0.00},{min:80,rate:0.00},{min:71,rate:0.00},{min:70,rate:0.00},{min:61,rate:0.00}] }
  };

  const UBI_NEW = {
    'í˜„ëŒ€': { tmap:[{min:96,rate:15.80},{min:95,rate:15.80},{min:91,rate:15.80},{min:90,rate:15.80},{min:86,rate:13.00},{min:85,rate:13.00},{min:81,rate:13.00},{min:80,rate:13.00},{min:71,rate:9.50},{min:70,rate:9.50},{min:61,rate:0.00}],
              naver:[{min:96,rate:15.00},{min:95,rate:15.00},{min:91,rate:15.00},{min:90,rate:15.00},{min:86,rate:12.20},{min:85,rate:12.20},{min:81,rate:12.20},{min:80,rate:12.20},{min:71,rate:8.70},{min:70,rate:8.70},{min:61,rate:0.00}] },
    'KB':   { tmap:[{min:96,rate:19.50},{min:95,rate:19.50},{min:91,rate:13.70},{min:90,rate:13.70},{min:86,rate:7.30},{min:85,rate:7.30},{min:81,rate:7.30},{min:80,rate:7.30},{min:71,rate:0.60},{min:70,rate:0.60},{min:61,rate:0.00}],
              naver:[{min:96,rate:19.60},{min:95,rate:19.60},{min:91,rate:19.60},{min:90,rate:19.60},{min:86,rate:18.60},{min:85,rate:18.60},{min:81,rate:18.60},{min:80,rate:18.60},{min:71,rate:13.10},{min:70,rate:13.10},{min:61,rate:0.00}] },
    'ì‚¼ì„±': { tmap:[{min:96,rate:16.90},{min:95,rate:16.90},{min:91,rate:10.70},{min:90,rate:4.60},{min:86,rate:4.60},{min:85,rate:4.60},{min:81,rate:4.60},{min:80,rate:0.00},{min:71,rate:0.00},{min:70,rate:0.00},{min:61,rate:0.00}],
              naver:[{min:96,rate:19.50},{min:95,rate:19.50},{min:91,rate:11.50},{min:90,rate:4.70},{min:86,rate:4.70},{min:85,rate:4.70},{min:81,rate:4.70},{min:80,rate:0.00},{min:71,rate:0.00},{min:70,rate:0.00},{min:61,rate:0.00}] },
    'DB':   { tmap:[{min:96,rate:21.00},{min:95,rate:21.00},{min:91,rate:14.50},{min:90,rate:14.50},{min:86,rate:4.10},{min:85,rate:4.10},{min:81,rate:4.10},{min:80,rate:4.10},{min:71,rate:4.10},{min:70,rate:0.00},{min:61,rate:0.00}],
              naver:[{min:96,rate:21.00},{min:95,rate:21.00},{min:91,rate:14.50},{min:90,rate:14.50},{min:86,rate:4.10},{min:85,rate:4.10},{min:81,rate:4.10},{min:80,rate:4.10},{min:71,rate:4.10},{min:70,rate:0.00},{min:61,rate:0.00}] },
    'ë©”ë¦¬ì¸ ':{ tmap:[{min:96,rate:15.00},{min:95,rate:6.00},{min:91,rate:6.00},{min:90,rate:6.00},{min:86,rate:6.00},{min:85,rate:0.00},{min:81,rate:0.00},{min:80,rate:0.00},{min:71,rate:0.00},{min:70,rate:0.00},{min:61,rate:0.00}],
               naver:[{min:96,rate:15.00},{min:95,rate:6.00},{min:91,rate:6.00},{min:90,rate:6.00},{min:86,rate:6.00},{min:85,rate:0.00},{min:81,rate:0.00},{min:80,rate:0.00},{min:71,rate:0.00},{min:70,rate:0.00},{min:61,rate:0.00}] },
    'í•œí™”': { tmap:[{min:96,rate:18.10},{min:95,rate:18.10},{min:91,rate:18.10},{min:90,rate:18.10},{min:86,rate:9.50},{min:85,rate:9.50},{min:81,rate:9.50},{min:80,rate:9.50},{min:71,rate:0.00},{min:70,rate:0.00},{min:61,rate:0.00}],
              naver:[{min:96,rate:0.00},{min:95,rate:0.00},{min:91,rate:0.00},{min:90,rate:0.00},{min:86,rate:0.00},{min:85,rate:0.00},{min:81,rate:0.00},{min:80,rate:0.00},{min:71,rate:0.00},{min:70,rate:0.00},{min:61,rate:0.00}] }
  };

  function getUbiRate(comp, app, score, isNew){
    if (!score || app === 'none') return 0.00;
    const table = isNew ? UBI_NEW : UBI_USED;
    const compRow = table[comp];
    if (!compRow || !compRow[app]) return 0.00;
    for (const rule of compRow[app]){
      if (score >= rule.min) return Number(rule.rate);
    }
    return 0.00;
  }

  function getUbiMax(comp, isNew){
    const table = isNew ? UBI_NEW : UBI_USED;
    const compRow = table[comp] || {};
    const candidates = [];
    if (compRow.tmap) candidates.push(...compRow.tmap.map(r => Number(r.rate)));
    if (compRow.naver) candidates.push(...compRow.naver.map(r => Number(r.rate)));
    return candidates.length ? Math.max(...candidates) : 0.00;
  }

  const RIDER_WALK = { 'í˜„ëŒ€':5.00, 'KB':10.00, 'ì‚¼ì„±':6.00, 'DB':8.80, 'ë©”ë¦¬ì¸ ':0.00, 'í•œí™”':0.00 };
  const RIDER_TRANSIT = { 'í˜„ëŒ€':9.00, 'KB':10.00, 'ì‚¼ì„±':10.00, 'DB':10.00, 'ë©”ë¦¬ì¸ ':0.00, 'í•œí™”':0.00 };
  const RIDER_SENIOR_EDU = { 'í˜„ëŒ€':5.00, 'KB':5.00, 'ì‚¼ì„±':5.00, 'DB':5.00, 'ë©”ë¦¬ì¸ ':5.00, 'í•œí™”':5.00 };

  function checkChildMsg(){
    const cnt = document.getElementById('childCount').value;
    document.getElementById('childMsg').style.display = (cnt === '2') ? 'block' : 'none';
  }

  function bindPills(){
    const map = [
      {pillId:'pill_walk', inputId:'rider_walk'},
      {pillId:'pill_transit', inputId:'rider_transit'},
      {pillId:'pill_seniorEdu', inputId:'rider_seniorEdu'}
    ];
    map.forEach(({pillId,inputId})=>{
      const pill = document.getElementById(pillId);
      const input = document.getElementById(inputId);
      const sync = ()=> pill.classList.toggle('on', input.checked);
      pill.addEventListener('click', ()=>{ input.checked = !input.checked; sync(); });
      sync();
    });
  }

  function fmtRate(x){
    return `${Number(x).toFixed(2)}%`;
  }


  function calculate(){
    const km = document.getElementById('km').value;

    const carAge = parseInt(document.getElementById('carAge').value, 10) || 0;
    const isNew = (carAge === 0);

    const bbox = document.getElementById('bbox').value;

    const childCount = document.getElementById('childCount').value;
    const childAgeVal = document.getElementById('childAge').value;

    const ubiApp = document.getElementById('ubiApp').value;
    const ubiScore = parseInt(document.getElementById('ubiScore').value, 10) || 0;

    const optWalk = document.getElementById('rider_walk').checked;
    const optTransit = document.getElementById('rider_transit').checked;
    const optSeniorEdu = document.getElementById('rider_seniorEdu').checked;

    let results = [];

    for (const comp of companies){
      let instant = 0.00;
      let mileage = 0.00;
      let logsInstant = [];
      let logMileage = '';

      mileage = (KM_DATA[comp] && KM_DATA[comp][km] !== undefined) ? Number(KM_DATA[comp][km]) : 0.00;
      logMileage = `ë§ˆì¼ë¦¬ì§€(í›„ì •ì‚°) ${fmtRate(mileage)}`;

      if (bbox === 'Y'){
        const bVal = getBBoxRate(comp, carAge);
        if (bVal > 0){
          instant += bVal;
          logsInstant.push(`ë¸”ë™ë°•ìŠ¤ ${fmtRate(bVal)}`);
        }
      }

      if (childCount !== '0' && childAgeVal !== 'none'){
        const key = (childAgeVal === 'fetus') ? 'fetus' : Number(childAgeVal);
        const cVal = getChildRate(comp, childCount, key);
        if (cVal > 0){
          instant += cVal;
          logsInstant.push(`ìë…€í• ì¸ ${fmtRate(cVal)}`);
        }
      }

      if (ubiApp !== 'none'){
        const uVal = getUbiRate(comp, ubiApp, ubiScore, isNew);
        if (uVal > 0){
          instant += uVal;
          logsInstant.push(`ì•ˆì „ìš´ì „ ${fmtRate(uVal)}`);
        }
      }

      if (optWalk){
        const v = Number(RIDER_WALK[comp] || 0);
        if (v > 0){
          instant += v;
          logsInstant.push(`ê±·ê¸°ì ìˆ˜ ${fmtRate(v)}`);
        }
      }
      if (optTransit){
        const v = Number(RIDER_TRANSIT[comp] || 0);
        if (v > 0){
          instant += v;
          logsInstant.push(`ëŒ€ì¤‘êµí†µ ${fmtRate(v)}`);
        }
      }
      if (optSeniorEdu){
        const v = Number(RIDER_SENIOR_EDU[comp] || 0);
        if (v > 0){
          instant += v;
          logsInstant.push(`ê³ ë ¹êµìœ¡ ${fmtRate(v)}`);
        }
      }

      const simpleSum = instant + mileage;

      let consider = [];

      if (bbox === 'N'){
        const add = getBBoxRate(comp, carAge);
        if (add > 0) consider.push({ name:'ë¸”ë™ë°•ìŠ¤ ì¥ì°©', rate:add, type:'simpleMax' });
      }

      if (ubiApp === 'none' || !ubiScore){
        const maxUbi = getUbiMax(comp, isNew);
        if (maxUbi > 0) consider.push({ name:'ì•ˆì „ìš´ì „(UBI)', rate:maxUbi, type:'simpleMax' });
      }

      if (!optWalk){
        const add = Number(RIDER_WALK[comp] || 0);
        if (add > 0) consider.push({ name:'ê±·ê¸°ì ìˆ˜ í• ì¸íŠ¹ì•½', rate:add, type:'labeled', key:'walk', label:'ê¸°ì¤€ ì¶©ì¡± ì—¬ë¶€:' });
      }
      if (!optTransit){
        const add = Number(RIDER_TRANSIT[comp] || 0);
        if (add > 0) consider.push({ name:'ëŒ€ì¤‘êµí†µì´ìš© í• ì¸íŠ¹ì•½', rate:add, type:'labeled', key:'transit', label:'ì´ìš© ì‹¤ì  ê¸°ì¤€:' });
      }
      if (!optSeniorEdu){
        const add = Number(RIDER_SENIOR_EDU[comp] || 0);
        if (add > 0) consider.push({ name:'ê³ ë ¹ìš´ì „ì êµí†µì•ˆì „êµìœ¡í• ì¸', rate:add, type:'labeled', key:'seniorEdu', label:'ì—°ë ¹/ì´ìˆ˜ ì¡°ê±´:' });
      }

      consider = consider.filter(x => Number(x.rate) > 0);

      results.push({
        name: comp,
        instantRate: instant,
        mileageRate: mileage,
        simpleSumRate: simpleSum,
        logInstant: logsInstant.join(', ') || 'í•´ë‹¹ ì—†ìŒ',
        logMileage,
        consider
      });
    }

    const allInstantZero = results.every(r => Number(r.instantRate) === 0);
    results.sort((a, b) => {
      if (allInstantZero) return Number(b.mileageRate) - Number(a.mileageRate);
      return Number(b.instantRate) - Number(a.instantRate);
    });

    const top3Names = results.slice(0,3).map(x=>x.name);

    const resBox = document.getElementById('result');
    resBox.style.display = 'block';
    resBox.innerHTML = '';

    results.forEach((r)=>{
      const isTop3 = top3Names.includes(r.name);
      const rank = top3Names.indexOf(r.name);
      const icon = (rank === 0) ? 'ğŸ¥‡' : (rank === 1 ? 'ğŸ¥ˆ' : (rank === 2 ? 'ğŸ¥‰' : ''));
      const bestClass = isTop3 ? 'best' : '';
      const badgeHtml = isTop3 ? `<span class="badge best">TOP ${rank+1}</span>` : `<span class="badge">ë¹„êµ</span>`;

      let considerHtml = '';
      if (r.consider && r.consider.length){
        considerHtml += `<div class="consider-box warn">
          <div class="consider-title">ì¶”ê°€ í• ì¸ ê°€ëŠ¥ íŠ¹ì•½(í˜„ì¬ ë¯¸ì„ íƒ ê¸°ì¤€)</div>`;

        r.consider.forEach(item=>{
          if (item.type === 'simpleMax'){
            considerHtml += `
              <div class="consider-item">
                <b>${item.name}</b> ê°€ì… ì‹œ ìµœëŒ€ <b>+${fmtRate(item.rate)}</b> ê°€ëŠ¥
              </div>`;
            return;
          }
          if (item.type === 'labeled'){
            const rule = item.key ? getRiderRuleText(r.name, item.key) : 'ëª…ì‹œ X';
            considerHtml += `
              <div class="consider-item">
                <b>${item.name}</b> ê°€ì… ì‹œ ìµœëŒ€ <b>+${fmtRate(item.rate)}</b> ê°€ëŠ¥
                <div class="mini-note"><b>${item.label}</b> ${rule}</div>
              </div>`;
            return;
          }
        });

        considerHtml += `</div>`;
      }

      resBox.innerHTML += `
        <div class="card ${bestClass}">
          <div class="card-top">
            <div>
              <div class="co-name">${icon} ${r.name}</div>
              <div class="badges">${badgeHtml}</div>
            </div>

            <div class="rate-box">
              <div class="rate instant">
                <div class="k">ì¦‰ì‹œí• ì¸(ì„ í• ì¸) í•©ê³„</div>
                <div class="v">${fmtRate(r.instantRate)}</div>
              </div>
              <div class="rate mileage">
                <div class="k">ë§ˆì¼ë¦¬ì§€(í›„ì •ì‚°) í™˜ê¸‰ìœ¨</div>
                <div class="v">${fmtRate(r.mileageRate)}</div>
              </div>
            </div>
          </div>

          <div class="divider"></div>

          <span class="desc"><strong>ì¦‰ì‹œí• ì¸ êµ¬ì„±</strong>: ${r.logInstant}</span>
          <span class="desc"><strong>í›„ì •ì‚°</strong>: ${r.logMileage}</span>
          <span class="desc"><strong>ë‹¨ìˆœí•©(ì°¸ê³ )</strong>: ${fmtRate(r.simpleSumRate)} (ì‹¤ì œ ì ìš© ìˆœì„œ ë°˜ì˜ ì•„ë‹˜)</span>

          ${considerHtml}
        </div>
      `;
    });

    // iOS WebViewì—ì„œ innerHTML ì§í›„ í­ ê³„ì‚° íƒ€ì´ë° ë¬¸ì œ ì™„í™”
    requestAnimationFrame(() => {
      requestAnimationFrame(() => {
        document.documentElement.scrollLeft = 0;
        document.body.scrollLeft = 0;
        window.dispatchEvent(new Event('resize'));
      });
    });
  }

  buildCarAgeOptions();
  checkChildMsg();
  bindPills();
</script>

</body>
</html>

